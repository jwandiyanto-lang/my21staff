---
phase: 11-bolt-telegram
plan: 01
type: execute
---

<objective>
Deploy my21staff on bolt.new with real Supabase connection and integrate Telegram bot for CRM notifications.

Purpose: Production deployment with real data and Telegram notifications for new leads/messages.
Output: Live CRM showing 136 contacts + Telegram bot sending notifications.
</objective>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md

**GitHub Repo:** https://github.com/jwandiyanto-lang/my21staff
**Supabase Project:** tcpqqublnkphuwhhwizx
**Workspace ID:** 0318fda5-22c4-419b-bdd8-04471b818d17
**Contacts in DB:** 136

**Telegram Bot:** To be created via @BotFather
**n8n Instance:** http://100.113.96.25:5678 (for webhook handling)
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <action>Import to bolt.new and configure env vars</action>
  <instructions>
1. Go to bolt.new
2. Click "Import from GitHub"
3. Enter: `jwandiyanto-lang/my21staff`
4. Wait for import to complete
5. Go to Settings â†’ Environment Variables
6. Add these variables:
   - `NEXT_PUBLIC_DEV_MODE` = `false`
   - `NEXT_PUBLIC_SUPABASE_URL` = `https://tcpqqublnkphuwhhwizx.supabase.co`
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY` = (from Supabase â†’ Settings â†’ API â†’ anon public)
   - `SUPABASE_SERVICE_ROLE_KEY` = (from Supabase â†’ Settings â†’ API â†’ service_role)
7. Redeploy the app
  </instructions>
  <verification>App loads without dev mode, login page accessible</verification>
  <resume-signal>Type "deployed" when bolt.new is running</resume-signal>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <action>Verify real data displays in CRM</action>
  <instructions>
1. Open the bolt.new preview URL
2. Navigate to /login
3. Log in with your Supabase credentials
4. Go to Database page
5. Verify you see 136 contacts (not 2 mock contacts)
6. Check contact data: names, phones (+62 format), statuses
  </instructions>
  <verification>CRM shows 136 real contacts from Supabase</verification>
  <resume-signal>Type "verified" when contacts display correctly</resume-signal>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <action>Create Telegram Bot</action>
  <instructions>
1. Open Telegram and message @BotFather
2. Send `/newbot`
3. Name: `my21staff CRM`
4. Username: `my21staff_crm_bot` (or available variant)
5. Copy the bot token (looks like: 123456789:ABCdefGHIjklMNOpqrsTUVwxyz)
6. Send `/setdescription` and add: "CRM notifications for my21staff"
  </instructions>
  <verification>Bot created with token</verification>
  <resume-signal>Paste the bot token when ready</resume-signal>
</task>

<task type="auto">
  <name>Task 4: Create n8n workflow for Telegram notifications</name>
  <files>n8n workflow</files>
  <action>
Create n8n workflow that:
1. Triggers on new contact in Supabase (via webhook or polling)
2. Sends Telegram message with lead details
3. Includes: name, phone, status, source

Workflow nodes:
- Webhook/Schedule trigger
- Supabase query for new contacts
- Telegram Bot node to send message
- Format: "ðŸ†• New Lead: {name}\nðŸ“± {phone}\nðŸ“Š Status: {status}"
  </action>
  <verify>Test message sent to Telegram</verify>
  <done>Telegram notifications working for new leads</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] bolt.new deployed with real Supabase connection
- [ ] CRM shows 136 contacts (not mock data)
- [ ] Telegram bot created and token saved
- [ ] n8n workflow sends notifications to Telegram
- [ ] Test notification received
</verification>

<success_criteria>
- my21staff live on bolt.new with production data
- All 136 contacts visible in CRM
- Telegram bot sends notifications for new leads
- End-to-end flow: Google Sheets â†’ n8n â†’ Supabase â†’ CRM + Telegram
</success_criteria>
