---
phase: 01-foundation
plan: 01
type: execute
---

<objective>
Set up Next.js 15 project with Shadcn/ui and Supabase configuration.

Purpose: Establish the project scaffold with multi-environment Supabase config that all subsequent phases depend on.
Output: Working Next.js app with Supabase client/server helpers ready for auth.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md

**Reference v1 for patterns:**
@~/Desktop/21/my21staff/package.json
@~/Desktop/21/my21staff/src/lib/supabase/config.ts
@~/Desktop/21/my21staff/src/lib/supabase/server.ts
@~/Desktop/21/my21staff/src/lib/supabase/client.ts
@~/Desktop/21/my21staff/src/lib/utils.ts
@~/Desktop/21/my21staff/src/app/globals.css
@~/Desktop/21/my21staff/src/app/layout.tsx
@~/Desktop/21/my21staff/components.json
@~/Desktop/21/my21staff/tsconfig.json
@~/Desktop/21/my21staff/next.config.ts
@~/Desktop/21/my21staff/postcss.config.mjs
@~/Desktop/21/my21staff/eslint.config.mjs

**Tech stack (from PROJECT.md):**
- Next.js 15 + React 19 + TypeScript
- Supabase (PostgreSQL + Auth + RLS)
- Shadcn/ui + Tailwind CSS v4
- Framer Motion
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Next.js project with dependencies</name>
  <files>package.json, tsconfig.json, next.config.ts, postcss.config.mjs, eslint.config.mjs, components.json, tailwind.config.ts</files>
  <action>
    1. Run `npx create-next-app@latest . --typescript --tailwind --eslint --app --src-dir --import-alias "@/*"` in the v2 directory
    2. Install additional dependencies from v1: `npm install @supabase/ssr @supabase/supabase-js class-variance-authority clsx tailwind-merge sonner date-fns lucide-react framer-motion`
    3. Install dev dependencies: `npm install -D tw-animate-css`
    4. Copy components.json from v1 (Shadcn/ui config with New York style)
    5. Initialize Shadcn: `npx shadcn@latest init` - select: New York style, neutral base color, CSS variables
    6. Add core UI components: `npx shadcn@latest add button card input label toast`

    Do NOT install @radix-ui components manually - Shadcn handles this.
    Do NOT modify tailwind.config.ts beyond what Shadcn generates - Tailwind v4 uses globals.css for theming.
  </action>
  <verify>npm run dev starts without errors, localhost:3000 shows default Next.js page</verify>
  <done>Project runs, all dependencies installed, no TypeScript errors</done>
</task>

<task type="auto">
  <name>Task 2: Configure globals.css and root layout</name>
  <files>src/app/globals.css, src/app/layout.tsx, src/lib/utils.ts</files>
  <action>
    1. Copy globals.css from v1 - contains Tailwind v4 theme with orange/neutral palette, @theme inline block, CSS custom properties
    2. Update src/app/layout.tsx:
       - Keep Geist font setup from create-next-app
       - Add Toaster from sonner for notifications
       - Update metadata title to "my21staff" and description
    3. Copy src/lib/utils.ts from v1 - contains cn() helper for class merging

    The globals.css has:
    - @import "tailwindcss" and "tw-animate-css"
    - @custom-variant dark
    - @theme inline block for Tailwind v4 theming
    - :root and .dark CSS variables for peach/neutral palette
  </action>
  <verify>npm run dev shows styled page with correct fonts, no CSS errors in console</verify>
  <done>Theme applied, fonts loading, cn() utility available</done>
</task>

<task type="auto">
  <name>Task 3: Set up Supabase configuration</name>
  <files>src/lib/supabase/config.ts, src/lib/supabase/server.ts, src/lib/supabase/client.ts, .env.local.example</files>
  <action>
    1. Create src/lib/supabase/config.ts - copy from v1:
       - getSupabaseConfig() with multi-env support (production, local, test)
       - getCurrentEnvironment() helper
       - Reads SUPABASE_ENV to determine which env vars to use

    2. Create src/lib/supabase/server.ts - copy from v1:
       - createClient() for server components/actions (uses cookies)
       - createAdminClient() for service role operations (bypasses RLS)
       - Uses @supabase/ssr with cookie handling

    3. Create src/lib/supabase/client.ts - copy from v1:
       - createClient() for browser (client components)
       - Uses @supabase/ssr createBrowserClient

    4. Create .env.local.example with required variables:
       - NEXT_PUBLIC_SUPABASE_URL
       - NEXT_PUBLIC_SUPABASE_ANON_KEY
       - SUPABASE_SERVICE_ROLE_KEY
       - SUPABASE_ENV (optional, defaults to production)
       - NEXT_PUBLIC_LOCAL_SUPABASE_URL (for local dev)
       - NEXT_PUBLIC_LOCAL_SUPABASE_ANON_KEY
       - LOCAL_SUPABASE_SERVICE_ROLE_KEY

    Note: Import Database type as `import type { Database } from '@/types/database'` - the types file will be created in plan 03.
    For now, use `any` as a placeholder or create a minimal stub.
  </action>
  <verify>TypeScript compiles without errors (ignoring missing Database type for now)</verify>
  <done>Supabase config files exist, multi-env setup ready, env example documented</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run dev` starts without errors
- [ ] `npm run build` succeeds (may have type warnings until Database type added)
- [ ] Localhost:3000 displays Next.js page with correct theme
- [ ] All Supabase config files exist at correct paths
- [ ] .env.local.example documents required variables
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No blocking TypeScript errors
- Project ready for auth implementation (Plan 02)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md` following the summary template.
</output>
