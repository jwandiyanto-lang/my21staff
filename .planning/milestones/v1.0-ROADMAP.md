# Milestone v1.0: MVP

**Status:** SHIPPED 2026-01-14
**Phases:** 1-5
**Total Plans:** 14

## Overview

Rebuild of my21staff with focus on completing core CRM features: a proper lead database view, functional two-way WhatsApp messaging via Kapso, and a Website Manager for content-driven lead generation. Foundation copied from v1, then systematically completing what was half-built.

## Phases

### Phase 1: Foundation

**Goal**: Working auth, workspace architecture, and database schema copied from v1
**Depends on**: Nothing (first phase)
**Plans**: 3 plans

Plans:
- [x] 01-01: Project setup with Next.js 15, Shadcn/ui, multi-env Supabase
- [x] 01-02: Auth flow with protected routes, middleware, login/signup pages
- [x] 01-03: Database schema and workspace routing with RLS

**Details:**
- Established project scaffold with multi-environment Supabase config
- Shadcn/ui New York style with neutral base
- Public routes include /forms for public form pages
- Workspace routing via [workspace] slug param

---

### Phase 2: Database View

**Goal**: Lead table showing all contacts with form submission answers, status badges (Hot/Warm/Cold/Converted), expandable detail sheet, and filters
**Depends on**: Phase 1
**Plans**: 3 plans

Plans:
- [x] 02-01: Sidebar navigation and workspace layout shell
- [x] 02-02: DataTable with status filtering and search
- [x] 02-03: Contact detail sheet with tabs (Overview, Messages, Forms)

**Details:**
- Simplified sidebar with 3 nav items only (Database, Inbox, Settings)
- Simplified DataTable (no pagination for MVP)
- Status filter only (payment/source/tags filters deferred)
- Dev mode bypass for local testing without Supabase

---

### Phase 3: Inbox Core

**Goal**: Conversation list with message history loaded from Kapso, filtering by lead status
**Depends on**: Phase 2
**Plans**: 3 plans

Plans:
- [x] 03-01: Two-panel inbox layout with conversation list sidebar
- [x] 03-02: Message thread display with bubbles and timestamps
- [x] 03-03: Status filtering and empty states

**Details:**
- Two-panel layout (320px sidebar, flex-1 message area)
- ConversationWithContact type for joined data
- Message bubbles 70% max-width, outbound right/primary, inbound left/muted
- Lazy load messages on conversation selection
- Empty states with icons: no conversations, no results, no filter matches

---

### Phase 4: Inbox Send

**Goal**: Wire up Send button to Kapso API with optimistic UI for sent messages
**Depends on**: Phase 3
**Plans**: 1 plan

Plans:
- [x] 04-01: Send message integration with Kapso API and optimistic UI

**Details:**
- Optimistic UI with status='sending' indicator, replaced on success/error
- Dev mode bypass for Kapso API when SUPABASE_ENV=dev
- Kapso client copied from v1

---

### Phase 5: Website Manager

**Goal**: CMS for articles and webinars with public pages, webinar registration flows that create contacts in CRM
**Depends on**: Phase 1 (only needs foundation)
**Plans**: 4 plans

Plans:
- [x] 05-01: Schema and types for articles, webinars, registrations
- [x] 05-02: Admin UI shell with content tabs and card grid
- [x] 05-03: Article CRUD with create/edit sheet and public page
- [x] 05-04: Webinar CRUD with registration flow and lead generation

**Details:**
- Public SELECT for published articles/webinars (no auth required)
- Public INSERT for webinar registrations (lead generation)
- Workspace-scoped slug uniqueness for articles/webinars
- Website nav item added as 4th sidebar item
- Sheet pattern for forms (consistent with contact detail sheet)
- Contact lookup by phone (workspace-scoped) before creating new

---

## Milestone Summary

**Key Decisions:**
- Rebuild in new folder (v2) — clean slate while preserving v1 reference
- 3 features only for v2 — focus over feature creep
- Kapso over official WhatsApp API — already integrated in v1, simpler
- Dev mode bypass for local testing — test without Supabase/Kapso setup
- Multi-env Supabase via SUPABASE_ENV — switch dev/prod with one variable
- Simplified v2 schema (core tables) — only what's needed for v2 features

**Issues Resolved:**
- Inbox Send button now functional (was placeholder in v1)
- Inbox loads actual messages (was empty in v1)
- Lead status filtering implemented (missing in v1)
- Form submission responses displayed in database view (missing in v1)

**Issues Deferred:**
- Production deployment and Supabase migration
- Real Kapso API integration (using dev mode mock)

**Technical Debt Incurred:**
- None significant — clean build

---

_For current project status, see .planning/ROADMAP.md_
