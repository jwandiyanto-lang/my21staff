---
phase: 13-production-validation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: []
autonomous: false

must_haves:
  truths:
    - "New user can sign in from landing page without errors"
    - "All dashboard tabs load successfully (Dashboard, Inbox, Leads, Your Team)"
    - "Real data displays correctly in production (not mock data)"
    - "No console errors during normal navigation"
    - "WhatsApp message creates lead in dashboard within 10 seconds (TEST-02)"
    - "Sarah bot responds with correct persona (Phase 10 feature)"
    - "Your Team shows simplified Intern settings without Brain tab (Phase 12 feature)"
  artifacts:
    - path: "production deployment"
      provides: "Live site at www.my21staff.com"
      status: "deployed and accessible"
  key_links:
    - from: "Landing page"
      to: "Clerk authentication"
      via: "Sign in button"
      pattern: "click -> redirect to auth"
    - from: "Clerk auth"
      to: "Dashboard"
      via: "Post-auth redirect"
      pattern: "successful auth -> workspace view"
    - from: "Dashboard sidebar"
      to: "All tabs"
      via: "Navigation links"
      pattern: "click -> tab loads without error"
    - from: "WhatsApp message"
      to: "Leads tab"
      via: "Kapso webhook"
      pattern: "message received -> lead appears in database within 10s"
---

<objective>
Validate v2.0.1 production deployment through manual user testing with immediate bug fixes.

Purpose: Final pre-launch validation ensuring smooth user experience for new workspace members
Output: Confidence that production is ready for real users
</objective>

<execution_context>
@/home/jfransisco/.claude/get-shit-done/workflows/execute-plan.md
@/home/jfransisco/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-production-validation/13-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify production deployment health</name>
  <files>N/A (verification only)</files>
  <action>
    Run pre-validation checks to ensure production is ready for testing:

    1. Verify latest code is deployed:
       - Run `git log --oneline -3` to get local commit hash
       - Run `vercel ls` or check Vercel dashboard to confirm production deployment matches local master
       - Note the commit hash for user to verify in production (footer or console)

    2. Verify build passes locally:
       - Run `npm run build` to catch any build errors
       - Run `npm run type-check` to verify TypeScript

    3. Create validation checklist for user:
       Generate a clear checklist the user will follow during testing:

       **A. Landing Page (www.my21staff.com)**
       - [ ] Page loads without errors
       - [ ] Sign in button is visible and clickable
       - [ ] Brand elements display correctly (logo, colors)

       **B. Authentication Flow**
       - [ ] Clerk sign-in modal opens
       - [ ] Can sign in with email/password or OAuth
       - [ ] No errors during authentication
       - [ ] Redirects to dashboard after sign-in

       **C. Dashboard Tab**
       - [ ] Page loads without blank screen
       - [ ] Real workspace data displays (not mock data)
       - [ ] No console errors (check browser DevTools)

       **D. Inbox Tab**
       - [ ] Kapso inbox iframe loads
       - [ ] WhatsApp conversations visible (if any exist)
       - [ ] No loading spinner stuck indefinitely

       **E. Leads Tab (Database)**
       - [ ] Contact list displays
       - [ ] Can click a contact to see details
       - [ ] Lead panel shows structured sections (Vitals, Source, Engagement, Profile, Business Info)
       - [ ] Inline editing works (click field, edit, blur to save)

       **F. Your Team Tab (Phase 12 Features)**
       - [ ] Page loads without errors
       - [ ] Simplified Intern settings visible (Bot Name, Persona dropdown, Script textarea)
       - [ ] NO Brain tab visible (should be hidden per Phase 12)
       - [ ] Can edit Bot Name field
       - [ ] Persona dropdown works
       - [ ] Script textarea is editable

       **G. Lead Automation End-to-End (TEST-02 + Phase 11 Features)**
       - [ ] Send a test WhatsApp message to +62 813-1859-025 from a NEW phone number
       - [ ] Wait 10 seconds, then check Leads tab
       - [ ] New lead appears with correct phone number (E.164 format)
       - [ ] Lead shows conversation link (kapso_conversation_id populated)
       - [ ] Send ANOTHER message from SAME phone
       - [ ] Verify NO duplicate lead created (lastActivityAt updated instead)

       **H. Sarah Bot Persona (Phase 10 Features)**
       - [ ] Review Sarah's response to your test message
       - [ ] Verify conversational tone (not robotic)
       - [ ] Verify message length under 140 chars
       - [ ] Verify appropriate emoji usage (1 per message max)
       - [ ] If you request handoff (e.g., "speak to human"), Sarah escalates

    4. Output the checklist for user reference
  </action>
  <verify>
    - Build succeeds: `npm run build` exits with code 0
    - TypeScript passes: `npm run type-check` exits with code 0
    - Checklist printed to console for user
  </verify>
  <done>Pre-validation automated checks pass, user has clear testing checklist</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Production validation checklist and pre-flight checks</what-built>
  <how-to-verify>
    **Begin manual testing now:**

    1. Open www.my21staff.com in your browser
    2. Open browser DevTools (F12) and keep Console tab visible
    3. Work through the checklist above in sections A through H:
       - A-B: Landing page and authentication
       - C-F: Dashboard tabs (Dashboard, Inbox, Leads, Your Team)
       - G: Lead automation end-to-end (requires WhatsApp test message)
       - H: Sarah bot persona verification

    **Critical v2.0.1 features to verify:**
    - Lead creation from WhatsApp (Phase 11) - Section G
    - Sarah bot persona/handoff (Phase 10) - Section H
    - Simplified Intern settings (Phase 12) - Section F

    **When you encounter an issue:**
    - Describe the error (what you see, console errors if any)
    - Include screenshot if helpful
    - I will fix immediately and you continue testing

    **Testing complete when:**
    - All checklist items A-H pass without issues
    - OR you've reported and I've fixed all blocking issues
  </how-to-verify>
  <resume-signal>
    Report any issues you find. Type "all clear" when testing is complete with no issues.

    **Issue format:**
    - **Section:** [A-H]
    - **Tab:** [which tab]
    - **Action:** [what you did]
    - **Expected:** [what should happen]
    - **Actual:** [what happened]
    - **Console errors:** [if any]
  </resume-signal>
</task>

</tasks>

<verification>
Phase 13 is complete when:
- User can sign in from landing page without errors
- All 4 dashboard tabs load and display real data
- No blocking console errors during normal navigation
- WhatsApp message creates lead in dashboard within 10 seconds (TEST-02)
- Sarah bot responds with correct persona (Phase 10)
- Lead automation prevents duplicates on repeat messages (Phase 11)
- Your Team shows simplified settings without Brain tab (Phase 12)
- User confirms "all clear" after testing checklist sections A-H
</verification>

<success_criteria>
- Build passes (`npm run build`)
- TypeScript passes (`npm run type-check`)
- Production deployment verified to match local master branch
- User manually verifies all checklist items (sections A-H)
- No unresolved blocking issues remain
- Requirements TEST-02 and TEST-03 satisfied
- All v2.0.1 features (Phases 10-12) validated in production
</success_criteria>

<output>
After completion, create `.planning/phases/13-production-validation/13-01-SUMMARY.md`
</output>
