---
phase: 01-brand-guidelines
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified:
  - scripts/generate-logos.js
  - business/brand/logos/wordmark-full-32.png
  - business/brand/logos/wordmark-full-64.png
  - business/brand/logos/wordmark-full-128.png
  - business/brand/logos/wordmark-full-256.png
  - business/brand/logos/icon-only-32.png
  - business/brand/logos/icon-only-64.png
  - business/brand/logos/icon-only-128.png
  - business/brand/logos/icon-only-256.png
  - CLAUDE.md
autonomous: true

must_haves:
  truths:
    - "Logo PNG files exist at all required sizes"
    - "Logo generation is reproducible via script"
    - "CLAUDE.md points to correct BRAND.md location"
  artifacts:
    - path: "scripts/generate-logos.js"
      provides: "Logo generation script"
      contains: "sharp"
    - path: "business/brand/logos/wordmark-full-128.png"
      provides: "Primary wordmark PNG"
    - path: "business/brand/logos/icon-only-128.png"
      provides: "Primary icon PNG"
  key_links:
    - from: "scripts/generate-logos.js"
      to: "business/brand/logos/*.svg"
      via: "SVG input files"
      pattern: "wordmark-full.svg|icon-only.svg"
    - from: "CLAUDE.md"
      to: "business/brand/BRAND.md"
      via: "Brand reference"
      pattern: "business/brand/BRAND.md"
---

<objective>
Generate PNG logo files from SVG sources and update project references.

Purpose: Create deployable logo assets at standard sizes (32, 64, 128, 256px). Ensure CLAUDE.md references the new BRAND.md location for AI assistant context.

Output: 8 PNG files (4 sizes x 2 logos), generation script, updated CLAUDE.md.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-brand-guidelines/01-01-SUMMARY.md
@business/brand/logos/wordmark-full.svg
@business/brand/logos/icon-only.svg
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create logo generation script and generate PNGs</name>
  <files>
    scripts/generate-logos.js
    business/brand/logos/wordmark-full-32.png
    business/brand/logos/wordmark-full-64.png
    business/brand/logos/wordmark-full-128.png
    business/brand/logos/wordmark-full-256.png
    business/brand/logos/icon-only-32.png
    business/brand/logos/icon-only-64.png
    business/brand/logos/icon-only-128.png
    business/brand/logos/icon-only-256.png
  </files>
  <action>
1. Install sharp as dev dependency:
```bash
npm install --save-dev sharp
```

2. Create scripts/generate-logos.js:
```javascript
const sharp = require('sharp');
const fs = require('fs');
const path = require('path');

const sizes = [32, 64, 128, 256];
const logos = ['wordmark-full', 'icon-only'];
const inputDir = path.join(__dirname, '..', 'business', 'brand', 'logos');
const outputDir = inputDir;

async function generateLogos() {
  for (const logo of logos) {
    const svgPath = path.join(inputDir, `${logo}.svg`);

    if (!fs.existsSync(svgPath)) {
      console.error(`SVG not found: ${svgPath}`);
      continue;
    }

    const svgBuffer = fs.readFileSync(svgPath);

    for (const size of sizes) {
      const outputPath = path.join(outputDir, `${logo}-${size}.png`);

      // For wordmark, maintain aspect ratio (width-based)
      // For icon, use square dimensions
      const resizeOptions = logo === 'icon-only'
        ? { width: size, height: size, fit: 'contain', background: { r: 0, g: 0, b: 0, alpha: 0 } }
        : { height: size, fit: 'contain', background: { r: 0, g: 0, b: 0, alpha: 0 } };

      await sharp(svgBuffer)
        .resize(resizeOptions)
        .png()
        .toFile(outputPath);

      console.log(`Generated ${logo}-${size}.png`);
    }
  }

  console.log('Logo generation complete!');
}

generateLogos().catch(console.error);
```

3. Run the script:
```bash
node scripts/generate-logos.js
```

4. Verify all 8 PNG files were created.

Note: The wordmark maintains aspect ratio based on height, so widths will vary. The icon is square.
  </action>
  <verify>
Script exists: `ls scripts/generate-logos.js`
Sharp installed: `grep sharp package.json`
Run script: `node scripts/generate-logos.js`
Count PNGs: `ls business/brand/logos/*.png | wc -l` should be 8
Check sizes: `file business/brand/logos/*.png` shows PNG images
  </verify>
  <done>8 PNG files generated (wordmark-full and icon-only at 32, 64, 128, 256px)</done>
</task>

<task type="auto">
  <name>Task 2: Update CLAUDE.md with BRAND.md reference</name>
  <files>CLAUDE.md</files>
  <action>
Update CLAUDE.md to reference the new BRAND.md location.

Find the "Design System" section and update it:

Before (or add if missing):
```markdown
## Design System

See **[BRAND.md](./BRAND.md)** for complete brand guideline.
```

After:
```markdown
## Design System

See **[BRAND.md](./business/brand/BRAND.md)** for complete brand guidelines.
```

Also update the "Key Files" section to include:
```markdown
## Key Files

- `business/brand/BRAND.md` - Brand guidelines (colors, fonts, logo, voice)
- `business/brand/logos/` - Logo files (SVG source + PNG exports)
```

Keep existing key files, just add the brand-related entries.
  </action>
  <verify>
BRAND.md path updated: `grep "business/brand/BRAND.md" CLAUDE.md`
Key files section has brand entry: `grep -A5 "Key Files" CLAUDE.md | grep brand`
  </verify>
  <done>CLAUDE.md references correct BRAND.md location in /business/brand/</done>
</task>

</tasks>

<verification>
- [ ] sharp is in devDependencies
- [ ] scripts/generate-logos.js exists and runs without error
- [ ] 8 PNG files exist in business/brand/logos/
- [ ] PNGs are valid image files (not corrupt)
- [ ] CLAUDE.md references business/brand/BRAND.md
- [ ] Key Files section lists brand assets
</verification>

<success_criteria>
- Logo PNGs generated at all 4 sizes for both logo variants
- Generation is reproducible (run script again = same output)
- CLAUDE.md provides AI assistants with correct brand context path
- Brand assets organized in /business/brand/ folder structure
</success_criteria>

<output>
After completion, create `.planning/phases/01-brand-guidelines/01-02-SUMMARY.md`
</output>
