---
phase: 16-pricing-form
plan: 01
type: execute
---

<objective>
Enhance pricing page form with qualifying questions and Google Sheet capture via n8n webhook.

Purpose: Capture qualified leads with enough context for productive first conversations — not just contact info.
Output: Working form submission that logs to Google Sheet with business type, pain point, team size, and selected tier.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/16-pricing-form/16-CONTEXT.md
@.planning/phases/15-pricing-page/15-01-SUMMARY.md
@src/app/pricing/page.tsx

**Tech available:** Next.js 15, React 19, framer-motion, n8n (http://100.113.96.25:5678)
**Established patterns:** Modal forms with Bahasa Indonesia copy
**Google Sheets service account:** n8n-integration@gen-lang-client-0607995229.iam.gserviceaccount.com

**Constraining decisions:**
- Phase 16 CONTEXT: Keep existing modal UI, just update fields
- Phase 16 CONTEXT: No Supabase integration — Google Sheet is enough
- Phase 16 CONTEXT: No auto-reply via WhatsApp — Manual follow-up works fine
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update form fields with qualifying questions</name>
  <files>src/app/pricing/page.tsx</files>
  <action>
Update the modal form to include qualifying fields:

1. Keep existing: Nama, WhatsApp
2. Rename "Bisnis kamu" → "Jenis Bisnis" with placeholder "Contoh: Konsultan pendidikan, Toko online"
3. Add NEW field: "Masalah apa yang ingin diselesaikan?" (textarea, 2 rows, placeholder "Contoh: Follow-up manual, leads terlewat")
4. Add NEW field: "Berapa orang yang akan pakai sistem ini?" (select dropdown: "Hanya saya", "2-5 orang", "6-10 orang", "Lebih dari 10")
5. Add hidden input for selectedPlan so it submits with form

Add form state with useState:
- nama, whatsapp, jenisBisnis, masalah, teamSize
- Keep selectedPlan from existing state

All labels and placeholders in Bahasa Indonesia per CONTEXT.md.
  </action>
  <verify>npm run dev — modal opens, all fields render correctly, dropdown works</verify>
  <done>Form has 5 visible fields (Nama, WhatsApp, Jenis Bisnis, Masalah, Team Size) + hidden tier field</done>
</task>

<task type="auto">
  <name>Task 2: Add form submission handler</name>
  <files>src/app/pricing/page.tsx</files>
  <action>
Add form submission logic:

1. Create handleSubmit async function that:
   - Prevents default form submission
   - POSTs JSON to n8n webhook URL (use env var NEXT_PUBLIC_N8N_WEBHOOK_URL or placeholder "https://n8n.example.com/webhook/pricing-form")
   - Payload: { nama, whatsapp, jenisBisnis, masalah, teamSize, paket: selectedPlan, timestamp: new Date().toISOString() }
   - On success: close modal, show brief success state or alert
   - On error: show error message, don't close modal

2. Add loading state (isSubmitting) to disable button during submission
3. Button text: "Kirim" → "Mengirim..." when loading

Note: Actual webhook URL will be configured after n8n workflow is created.
  </action>
  <verify>npm run dev — form submits without page reload, loading state shows, error handling works (test with invalid URL)</verify>
  <done>Form POSTs to webhook URL, shows loading state, handles success/error gracefully</done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <action>Create n8n workflow: Webhook → Google Sheet</action>
  <instructions>
I've updated the form to POST to a webhook. Now create the n8n workflow:

1. Open n8n at http://100.113.96.25:5678
2. Create new workflow: "Pricing Form → Google Sheet"
3. Add nodes:
   - **Webhook** (trigger) — Method: POST, Path: "pricing-form"
   - **Google Sheets** (action) — Operation: Append Row
     - Spreadsheet: Create new "my21staff Leads" sheet or use existing
     - Sheet: "Leads"
     - Columns: Timestamp, Nama, WhatsApp, Jenis Bisnis, Masalah, Team Size, Paket
     - Map webhook body fields to columns
4. Activate workflow
5. Copy the webhook URL (should be like: http://100.113.96.25:5678/webhook/pricing-form)

Share the Google Sheet with: n8n-integration@gen-lang-client-0607995229.iam.gserviceaccount.com (Editor access)
  </instructions>
  <verification>
Test with: curl -X POST [WEBHOOK_URL] -H "Content-Type: application/json" -d '{"nama":"Test","whatsapp":"08123","jenisBisnis":"Test","masalah":"Test","teamSize":"Hanya saya","paket":"Solo","timestamp":"2026-01-16T00:00:00Z"}'
Check Google Sheet has the test row.
  </verification>
  <resume-signal>Paste the webhook URL (e.g., http://100.113.96.25:5678/webhook/pricing-form) to continue</resume-signal>
</task>

<task type="auto">
  <name>Task 3: Configure webhook URL and test end-to-end</name>
  <files>src/app/pricing/page.tsx, .env.local</files>
  <action>
1. Update form to use the real webhook URL from checkpoint
2. Add NEXT_PUBLIC_N8N_WEBHOOK_URL to .env.local
3. Test full flow: Open modal → Fill form → Submit → Check Google Sheet
  </action>
  <verify>Submit form from browser, verify row appears in Google Sheet within seconds</verify>
  <done>Form submissions logged to Google Sheet with all fields populated</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] Form has all qualifying fields (Nama, WhatsApp, Jenis Bisnis, Masalah, Team Size)
- [ ] Selected tier auto-populates in submission
- [ ] Form POSTs to n8n webhook successfully
- [ ] Google Sheet receives submissions with all columns
- [ ] `npm run build` succeeds without errors
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Form captures qualified lead data
- Google Sheet has test submissions
- No errors or warnings introduced
</success_criteria>

<output>
After completion, create `.planning/phases/16-pricing-form/16-01-SUMMARY.md`:

# Phase 16 Plan 01: Pricing Form Enhancement Summary

**[Substantive one-liner]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `path/to/file.ts` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Phase complete, ready for next phase
</output>
