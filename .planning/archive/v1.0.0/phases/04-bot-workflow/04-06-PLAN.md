---
phase: 04-bot-workflow
plan: 06
type: execute
wave: 4
depends_on: ["04-04", "04-05"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Incoming WhatsApp message receives greeting from bot"
    - "Bot asks qualification questions (destination, documents, English level)"
    - "Bot answers common FAQs about Eagle services"
    - "Qualified lead receives Community link (free path)"
    - "Hot lead can request 1-on-1 Consultation"
    - "Human receives notification when consultation is requested"
  artifacts: []
  key_links: []
---

<objective>
Verify complete bot workflow end-to-end.

Purpose: Confirm all Phase 4 requirements work together in production
Output: Verified qualification flow from greeting to routing
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@planning/PROJECT.md
@planning/ROADMAP.md
@planning/phases/04-bot-workflow/04-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run Convex dev and verify compilation</name>
  <files></files>
  <action>
1. Start Convex development server:
   `npx convex dev`

2. Verify no TypeScript errors
3. Verify all functions deploy successfully

If there are errors, fix them before proceeding.
  </action>
  <verify>Convex dashboard shows all functions deployed without errors</verify>
  <done>All AI and Kapso functions compile and deploy</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete bot qualification workflow</what-built>
  <how-to-verify>
Test the full flow by sending WhatsApp messages to Eagle's bot number:

1. **Greeting Flow (BOT-01)**
   - Send "halo" to the WhatsApp number
   - Expected: Bot greets and asks for name
   - Send your name
   - Expected: Bot asks for destination country

2. **Qualification Flow (BOT-02)**
   - Answer destination (e.g., "australia")
   - Expected: Bot asks about passport
   - Continue through document questions (CV, IELTS, transcript)
   - Expected: Bot asks ONE document at a time

3. **FAQ Test (BOT-03)**
   - Ask "eagle itu apa ya?"
   - Expected: Bot explains Eagle Overseas services

4. **Routing Flow (BOT-04, BOT-05)**
   - After document questions, bot should offer options
   - Reply "komunitas" to test community link
   - Expected: Bot sends community link
   - OR reply "konsultasi" to test human handoff
   - Expected: Bot acknowledges and flags for human

5. **Human Notification (BOT-06)**
   - Check Inbox at my21staff.com
   - Expected: Conversation appears with unread indicator
   - Conversation status should indicate consultation requested

**Check Convex Dashboard:**
- ariConversations shows state transitions (greeting -> qualifying -> routing -> handoff)
- ariConversations.context shows collected data
- contacts.lead_score updated by Brain
  </how-to-verify>
  <resume-signal>Type "approved" if all 6 requirements pass, or describe which fail</resume-signal>
</task>

</tasks>

<verification>
- [ ] BOT-01: Incoming message receives greeting
- [ ] BOT-02: Bot asks qualification questions one at a time
- [ ] BOT-03: Bot answers FAQs about Eagle services
- [ ] BOT-04: Bot offers Community link
- [ ] BOT-05: Bot offers 1-on-1 Consultation option
- [ ] BOT-06: Human receives notification when consultation requested
</verification>

<success_criteria>
All 6 BOT requirements verified working in production
</success_criteria>

<output>
After completion, create `planning/phases/04-bot-workflow/04-06-SUMMARY.md`
</output>
